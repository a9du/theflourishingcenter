var PROGRESS_COOKIE_NAME="progressally-progress-info";var PROGRESS_OBJECTIVE_COOKIE_NAME="progressally-objective-info";var PROGRESS_COOKIE_DAYS=3650;jQuery(document).ready(function(aG){function N(a3,a6,a5,a7){for(var a4=0;a4<a3.length;++a4){var a0=aG(a3[a4]),a2=a0.attr("pa-dep-value"),a1=a0.attr("pa-dep-value-not"),a8;if(typeof a2!==typeof undefined&&a2!==false){a8=a2.split(",");if(aG.inArray(a6,a8)>=0){a5(a0)}else{a7(a0)}}if(typeof a1!==typeof undefined&&a1!==false){a8=a1.split(",");if(aG.inArray(a6,a8)<0){a5(a0)}else{a7(a0)}}}}aG(document).on("change","[pa-dep-source]",function(){var a0=aG(this),a3="no",a2=a0.attr("pa-dep-source"),a1=aG('[pa-dep="'+a2+'"]');if(a0.attr("type")==="checkbox"){if(a0.is(":checked")){a3="yes"}}else{a3=a0.val()}if(a3){a3=a3.replace(/\"/g,'\\"')}N(a1.filter("[hide-toggle]"),a3,function(a4){a4.show()},function(a4){a4.hide()});N(a1.filter("[readonly-toggle]"),a3,function(a4){a4.prop("readonly",false)},function(a4){a4.prop("readonly",true)});N(a1.filter("[disable-toggle]"),a3,function(a4){a4.prop("disabled",false)},function(a4){a4.prop("disabled",true)})});if("yes"!==progressally_update.disable_track){if(progressally_update.user>0&&progressally_update.post_id>0){var u={action:"progressally_track_page_access",post_id:progressally_update.post_id,progressally_update_nonce:progressally_update.progressally_update_nonce};aG.ajax({type:"POST",url:progressally_update.ajax_url,data:u,success:false})}}var aJ=false;aG("html").on("touchstart",function(){aJ=false});aG("html").on("touchmove",function(){aJ=true});function o(a2,a0,a1){if(a2.type==="touchend"){if(aJ){return false}}return a1(a2,a0)}function az(a0,a1){aG(a0).each(function(a4,a5){var a3=aG(a5),a2=a3.attr("progressally-click-binded");if(typeof a2===typeof undefined||a2===false){a3.bind("touchend click",function(a6){return o(a6,this,a1)});a3.attr("progressally-click-binded","yes")}})}aG(document).on("change",".progressally-update",function(a0){aC(aG(this))});function P(a5){var a3={},a4=a5.find("input"),a1=true,a6;for(a6=0;a6<a4.length;++a6){var a2=aG(a4[a6]),a0=a2.attr("type"),a7=a2.attr("name");if(typeof a7!==typeof undefined&&a7!==false&&"radio"===a0){if(!(a7 in a3)){if(a5.find('input[name="'+a7+'"]:checked').length===0){a5.find('input[name="'+a7+'"]').attr("progressally-error","need-input");a1=false}a3[a7]=true}}}return a1}aG(document).on("change",".progressally-quiz input",function(a2){var a1=aG(this),a0=a1.parents(".progressally-quiz"),a3=a1.attr("name");if(typeof a3!==typeof undefined&&a3!==false){a0.find('input[name="'+a3+'"]').attr("progressally-error",false)}});function am(a4,a3){var a6=aG(a3),a0=a6.parents(".progressally-quiz-container"),a1=a0.find(".progressally-quiz"),a2=parseInt(a1.attr("post-id")),a5=null,a7;if(!P(a0)){return false}a7=a1.serialize();a7=a7.replace(/=/g,"|-|");a0.find(".progressally-quiz-submit-button").hide();a0.find(".progressally-quiz-wait-overlay").show();a5={action:"progressally_submit_quiz",p:a2,input:a7,user:progressally_update.user,to_update:ag(),progressally_update_nonce:progressally_update.progressally_update_nonce};aG.ajax({type:"POST",url:progressally_update.ajax_url,data:a5,cache:false,dataType:"json",success:function(a8){try{ak(a0,a2,a8)}catch(a9){alert(a9)}a0.find(".progressally-quiz-wait-overlay").hide()}});a4.stopPropagation();return false}function M(a4,a3){var a6=aG(a3),a0=a6.parents(".progressally-quiz-container"),a1=a0.find(".progressally-quiz"),a2=parseInt(a1.attr("post-id")),a5=null;aG(".progressally-quiz-reset-button-container-"+a2).hide();a0.find(".progressally-quiz-wait-overlay").show();a5={action:"progressally_reset_quiz",p:a2,user:progressally_update.user,to_update:ag(),progressally_update_nonce:progressally_update.progressally_update_nonce};aG.ajax({type:"POST",url:progressally_update.ajax_url,data:a5,cache:false,dataType:"json",success:function(a7){try{T(a2,a7)}catch(a8){alert(a8)}a0.find(".progressally-quiz-wait-overlay").hide()}});a4.stopPropagation();return false}function O(a0){var a3=aG('.progressally-update[post-id="'+a0+'"]'),a2,a1=0;if(a3.length>0){a2=a3.filter(":checked").length;a1=a2/a3.length}return a1}function J(a1){var a5=aG('.progressally-update[post-id="'+a1+'"]'),a2=aG('.progressally-objective-table[progressally-post-id="'+a1+'"]'),a0={},a3,a4=0;if(a5.length>0){a4=a5.filter(":checked").length;a3=a4/a5.length;if(a2.length>0){a4=a4/a2.length}aR(a1,a3,a4)}a5.each(function(a8,ba){var a7=aG(ba),a6=a7.attr("key"),a9=a7.is(":checked");a0[a6]=a9});return a0}function Y(){aG("body").append('<div class="progressally-interaction-update-wait" id="progressally-global-interaction-wait-overlay" style="display:block"></div>')}function Z(){aG("#progressally-global-interaction-wait-overlay").remove()}var aD={};function aE(a1,a0){var a4=ag(),a3={action:"progressally_update_progress",p:a1,v:a0,to_update:a4,progressally_update_nonce:progressally_update.progressally_update_nonce};if(!(a1 in aD)){aD[a1]=0}var a2=++aD[a1];if(a4.length>0){if(1<=O(a1)){Y()}}aG.ajax({type:"POST",url:progressally_update.ajax_url,data:a3,success:function(a6){try{if(aD[a1]===a2){var a5=JSON.parse(a6);B(a1,a5);Z();aD[a1]=0}}catch(a7){}}})}function aC(a4){var a5=a4,a2=parseInt(a5.attr("post-id")),a3=a5.attr("key"),a1=a5.val(),a0={};if(a5.is('[type="checkbox"]')){a1=a5.is(":checked")?true:false;aG('.progressally-update[key="'+a3+'"][post-id="'+a2+'"]').prop("checked",a1);a0=J(a2)}a0[a3]=a1;aE(a2,a0)}function B(a6,a8){if(a8){if("progress" in a8&&"keys" in a8){var a2,a4;for(a2 in a8.progress){var a0=parseFloat(a8.progress[a2]["pct"]),a7=parseInt(a8.progress[a2]["count"]);aR(a2,a0,a7);if(a0>=1){aG('.progressally-status-display[post-id="'+a2+'"]').show()}else{aG('.progressally-status-display[post-id="'+a2+'"]').hide()}}for(a2 in a8.keys){for(a4 in a8.keys[a2]){aG('input[type="checkbox"].progressally-update[key="'+a4+'"][post-id="'+a2+'"]').prop("checked",a8.keys[a2][a4]==="true")}}if(progressally_update.user==="0"){d(a8.keys)}}if("popup" in a8&&a8.popup!==""){af(a8.popup)}if("interaction" in a8){var a1,a5,a3;for(a1 in a8.interaction){a5=a8.interaction[a1];a3=aG('[progressally-interaction="'+a1+'"]');a3.after(a5);a3.remove()}}if("redirect" in a8&&a8.redirect!==""){window.location.href=a8.redirect}}}function T(a0,a1){if(a1&&"reset" in a1){if(a1.reset==="true"){aG(".progressally-quiz-reset-button-container-"+a0).hide();aG(".progressally-quiz-correct-message-"+a0).hide();aG(".progressally-quiz-incorrect-message-"+a0).hide();aG(".progressally-quiz-result-container-"+a0).empty().hide();aG(".progressally-quiz-submit-button-"+a0).show();aG(".progressally-quiz-current-page-"+a0).val("1").change();aG(".progressally-quiz-choice-input-"+a0).prop("checked",false).prop("disabled",false);B(a0,a1);if(progressally_update.user==="0"&&"cookie" in a1){R(a0,a1.cookie)}}}}function ak(a1,a3,a4){if(a4&&"quiz" in a4){var a2=a4.quiz;if("type" in a2&&"result-html" in a2){aG(".progressally-quiz-result-container-"+a3).html(a2["result-html"]).show();if(a2.type==="score"){for(var a0 in a2.question){if(a2.question[a0]==="yes"){aG("."+a0+"-correct-message-"+a3).show()}else{aG("."+a0+"-incorrect-message-"+a3).show()}}}if(a4.reset==="true"){aG(".progressally-quiz-reset-button-container-"+a3).show()}aG(".progressally-quiz-"+a3+" .progressally-quiz-choice-input:not(:checked)").prop("disabled",true)}if("result-popup" in a2&&a2["result-popup"]!==""){af(a2["result-popup"])}if(progressally_update.user==="0"&&"cookie" in a4){R(a3,a4.cookie)}}B(a3,a4)}function aR(a2,a1,a3){var a0=aG('[progressally-bar-update="'+a2+'"]'),a4=Math.round(a1*100)+"%";a0.find(".progressally_progress_bar_overlay").css("width",a4);a0.find(".progressally_progress_bar_percentage").text(a4);a0=aG('[progressally-text-update="'+a2+'"]');a0.text(a4);a0=aG('[progressally-count-update="'+a2+'"]');a0.text(a3);a0=aG('[progressally-pie-update="'+a2+'"]');if(a1>0.5){a0.find(".progressally_progress_pie_right").css("transform","rotate(90deg)");a0.find(".progressally_progress_pie_left").css("transform","rotate("+(Math.round((a1-0.5)*360)-90)+"deg)")}else{a0.find(".progressally_progress_pie_right").css("transform","rotate("+(Math.round(a1*360)-90)+"deg)");a0.find(".progressally_progress_pie_left").css("transform","rotate(-90deg)")}a0.find(".progressally_progress_pie_percentage").text(a4);a0=aG('[progressally-objective-completion-update="'+a2+'"]');a0.each(function(a7,a8){var a6=aG(a8),a5=parseFloat(a6.attr("percentage"));if(a1>=a5/100){a6.show()}else{a6.hide()}})}function ab(a3,a2){var a0="",a1=JSON.stringify(a2);date=new Date();date.setTime(date.getTime()+(PROGRESS_COOKIE_DAYS*24*60*60*1000));a0="; expires="+date.toGMTString();document.cookie=a3+"="+a1+a0+"; path=/"}function j(a3){if(a3){var a2=a3+"=",a1=document.cookie,a0=a1.indexOf(a2);if(a0>=0){a0+=a2.length;endIndex=a1.indexOf(";",a0);if(endIndex<0){endIndex=a1.length}return a1.substring(a0,endIndex)}}return null}function R(a0,a1){var a2=G();if(!(a0 in a2)){a2[a0]=new Object}if(a2[a0]===null||typeof a2[a0]!=="object"||a2[a0] instanceof Array){a2[a0]=new Object}a2[a0]["quiz"]=a1;ab(PROGRESS_COOKIE_NAME,a2)}function ac(a0,a3){var a2=G(),a1=false;if(!(a0 in a2)){a2[a0]=new Object}if(a2[a0]===null||typeof a2[a0]!=="object"||a2[a0] instanceof Array){a2[a0]=new Object}if("quiz" in a2[a0]){a1=a2[a0]["quiz"]}if(a3===null||typeof a3!=="object"||a3 instanceof Array){a2[a0]=new Object}else{a2[a0]=a3}if(false!==a1){a2[a0]["quiz"]=a1}ab(PROGRESS_COOKIE_NAME,a2)}function d(a5){var a3=w(),a1,a0,a4=[],a2;for(a1 in a5){if(!(a1 in a3)){a3[a1]=new Object}for(a0 in a5[a1]){if("true"===a5[a1][a0]){a3[a1][a0]="true"}else{if(a0 in a3[a1]){delete a3[a1][a0]}}}if(aG.isEmptyObject(a3[a1])){a4.push(a1)}}for(a2=0;a2<a4.length;++a2){delete a3[a4[a2]]}ab(PROGRESS_OBJECTIVE_COOKIE_NAME,a3)}function w(){var a0=JSON.parse(j(PROGRESS_OBJECTIVE_COOKIE_NAME));if(a0===null||typeof a0!=="object"||a0 instanceof Array){a0=new Object}return a0}function G(){var a0=JSON.parse(j(PROGRESS_COOKIE_NAME));if(a0===null||typeof a0!=="object"||a0 instanceof Array){a0=new Object}return a0}function z(){if(progressally_update.user==="0"){return G()}return progressally_update.user_meta}function s(a0,a1){if(progressally_update.user==="0"){ac(a0,a1)}else{progressally_update.user_meta[a0]=a1}}function aO(){var a0=z();aG(".progressally-toggle-trigger").each(function(a1,a2){ah(aG(a2),a0)})}function ah(a0,a9){var a7=a0.attr("key").split(","),a8=a0.attr("unchecked-class"),a6=a0.attr("checked-class"),a3=a0.attr("selector"),a1=aG(a3),a4=0,a2=a0.attr("post-id"),a5=true;if(!(a2 in a9)){a5=false}else{a9=a9[a2];for(a4=0;a4<a7.length;a4++){if(!(a7[a4] in a9)||a9[a7[a4]]==="false"){a5=false;break}}}if(typeof a6!==typeof undefined&&a6!==false){if(a5){a1.addClass(a6)}else{a1.removeClass(a6)}}if(typeof a8!==typeof undefined&&a8!==false){if(a5){a1.removeClass(a8)}else{a1.addClass(a8)}}}aG(document).on("change",".progressally-toggle",function(a0){r(aG(this))});var S={};function r(a5){var a7=a5,a2=parseInt(a7.attr("post-id")),a4=a7.attr("key"),a1=a7.val(),a6=null,a0={};if(a7.is('[type="checkbox"]')){a1=a7.is(":checked")?true:false}a0[a4]=a1;a6={action:"progressally_update_toggle",p:a2,v:a0,nonce:progressally_update.progressally_update_nonce};if(!(a2 in S)){S[a2]=0}var a3=++S[a2];aG.ajax({type:"POST",url:progressally_update.ajax_url,data:a6,success:function(a9){try{if(S[a2]===a3){var a8=JSON.parse(a9);n(a2,a4,a8);S[a2]=0}}catch(ba){}}})}function n(a4,a3,a1){if(a1){if("meta" in a1){var a2={},a0=false;a2[a4]=a1.meta;s(a4,a1.meta);aG('.progressally-toggle-trigger[post-id="'+a4+'"][key="'+a3+'"]').each(function(a5,a6){ah(aG(a6),a2)});if(a3 in a1.meta&&"true"===a1.meta[a3]){a0=true}aG('input.progressally-toggle[post-id="'+a4+'"][key="'+a3+'"]').prop("checked",a0)}}}function aI(){if(!aj()){var a0=document.createElement("script");a0.src="https://www.youtube.com/iframe_api";var a1=document.getElementsByTagName("script")[0];a1.parentNode.insertBefore(a0,a1)}}function k(a1){var a0={};if(a1){var a4=a1.split("&"),a2,a3;for(a2=0;a2<a4.length;++a2){a3=a4[a2].split("=");if(a3.length>1){a0[a3[0]]=a3[1]}}}return a0}function aj(){return typeof YT!=="undefined"&&typeof YT.Player!=="undefined"}var b={},x={};function H(a2,a3,a9){var a1=a2.attr("width"),a7=a2.attr("height"),a8=a2.attr("arg"),a0=k(a8),a5="progressally-youtube-div-"+a3+"-"+a9,a4={videoId:a3,playerVars:a0,events:{onStateChange:f}},a6;a2.html('<div id="'+a5+'"></div>');if(a1){a4.width=a1}if(a7){a4.height=a7}a6=new YT.Player(a5,a4);a6.progressally_video_id=a9;b[a9]=a6}function ax(){if(aj()){aG("[progressally-youtube-init]").each(function(a1,a2){var a0=aG(a2),a4=a0.attr("progressally-youtube-init"),a3=a0.attr("progressally-youtube-id");H(a0,a4,a3)})}else{setTimeout(ax,1000)}}function f(a2){var a0=a2.data,a1=a2.target.progressally_video_id;if(a0>0){x[a1]=true}if(1===a0){at(a1,a2.target)}else{v(a1,a2.target)}aS(a1,a2.target)}function g(a1,a0){var a3=aG(a0),a4=a3.attr("progressally-video-id"),a2=a3.attr("progressally-video-time");c(a4,a2,a3);V(aG('[progressally-youtube-id="'+a4+'"]'));a1.stopPropagation();return false}function i(a0){if(a0 in x){return true}return false}function c(a2,a1,a0){if(!i(a2)){t(a0);t(aG('[progressally-youtube-id="'+a2+'"]'));return false}if(aj()&&a2 in b){b[a2].seekTo(a1,true);return true}return false}var W={};function at(a0,a1){if(a0 in W&&false!==W[a0]){v(a0,a1)}W[a0]=setInterval(function(){aS(a0,a1)},1000)}function v(a0,a1){clearInterval(W[a0]);W[a0]=false}function aS(a0,a1){aY("youtube>"+a0,a1.getCurrentTime())}function L(){return typeof Vimeo!=="undefined"&&typeof Vimeo.Player!=="undefined"}function aN(){if(!L()){var a0=document.createElement("script");a0.src="https://player.vimeo.com/api/player.js";var a1=document.getElementsByTagName("script")[0];a1.parentNode.insertBefore(a0,a1)}}function aT(){if(L()){aG("[progressally-vimeo-init]").each(function(a1,a2){var a0=aG(a2),a3=a0.attr("progressally-vimeo-init");aV(a0,a3)})}else{setTimeout(aT,1000)}}var ap={},D={};function aV(a0,a3){if(!(a3 in ap)){try{var a2=new Vimeo.Player(a0[0]);a2.progressally_video_id=a3;a2.on("play",function(a4){aP(this.progressally_video_id)});if(("vimeo>"+a3) in progressally_update.video){a2.on("timeupdate",function(a4){av(a4,this)});a2.on("pause",function(a4){av(a4,this)});a2.on("ended",function(a4){av(a4,this)})}ap[a3]=a2}catch(a1){}}}function aP(a0){if(a0){D[a0]=true}}function ar(a1,a0){var a3=aG(a0),a4=a3.attr("progressally-video-id"),a2=a3.attr("progressally-video-time");an(a4,a2,a3);V(aG('[progressally-vimeo-id="'+a4+'"]'));a1.stopPropagation();return false}function F(a0){if(aM()){if(a0 in D){return true}return false}return true}function an(a4,a3,a2){var a0=aG('[progressally-vimeo-id="'+a4+'"]'),a1;aV(a0,a4);if(!(a4 in ap)){return false}a1=ap[a4];if(F(a4)){a1.setCurrentTime(a3);a1.play()}else{t(a2);t(a0);return false}return true}function av(a0,a1){aY("vimeo>"+a1.progressally_video_id,a0.seconds)}function ai(){if(typeof Wistia==="undefined"){var a0=document.createElement("script");a0.src="//fast.wistia.net/assets/external/E-v1.js";var a1=document.getElementsByTagName("script")[0];a1.parentNode.insertBefore(a0,a1)}}var aU={},E={},aW={};function au(){var a0=aG(this.iframe).attr("progressally-wistia-video-id");if(a0){E[a0]=true}}function aA(){window._wq=window._wq||[];_wq.push({id:"_all",onReady:function(a0){var a2=aG(a0.iframe),a1=a2.attr("progressally-wistia-video-id");aU[a1]=a0;a0.bind("play",au);if(("wistia>"+a1) in progressally_update.video){a0.bind("timechange",aa);a0.bind("pause",aa);a0.bind("end",aa)}if(a1 in aW){var a3=aW[a1];h(a1,a3[0],a3[1]);delete aW[a1]}}})}function m(a1,a0){var a3=aG(a0),a4=a3.attr("progressally-video-id"),a2=a3.attr("progressally-video-time");h(a4,a2,a3);V(aG('[progressally-wistia-id="'+a4+'"]'));a1.stopPropagation();return false}function A(a0){if(aM()){if(a0 in E){return true}return false}return true}function h(a2,a1,a0){if(a2 in aU){if(A(a2)){aU[a2].time(a1).play()}else{t(a0);t(aG('[progressally-wistia-id="'+a2+'"]'));return false}return true}else{if(!(a2 in aW)){aW[a2]=[a1,a0]}}return false}function aa(a1){var a2=aG(this.iframe),a0=a2.attr("progressally-wistia-video-id");aY("wistia>"+a0,a1)}function aq(a2,a1){a2.stopPropagation();var a4=aG(a1),a5=a4.attr("progressally-video-id"),a3=a4.attr("progressally-video-time"),a0;a0=aG('[progressally-video-js-id="'+a5+'"]');if(a0.length>0){aH(a0,a3);V(a0)}a0=aG('[progressally-youtube-id="'+a5+'"]');if(a0.length>0){c(a5,a3,a4);V(a0)}a0=aG('[progressally-vimeo-id="'+a5+'"]');if(a0.length>0){an(a5,a3,a4);V(a0)}a0=aG('[progressally-wistia-id="'+a5+'"]');if(a0.length>0){h(a5,a3,a4);V(a0)}return false}function aH(a0,a2){if(a0.length>1){a0=aG(a0[0])}var a1=a0.find("[progressally-video-js-identifier]").attr("progressally-video-js-identifier");if(a1 in videojs.players){videojs.players[a1].currentTime(a2);videojs.players[a1].play()}}function al(){if(videojs){aG("[progressally-video-js-id]").each(function(a3,a4){var a2=aG(a4),a1=a2.find("[progressally-video-js-identifier]"),a0=a2.attr("progressally-video-js-id");if(!a2.hasClass("progressally-video-js-initialized")){ay(a0,a1);a2.addClass("progressally-video-js-initialized")}})}else{setTimeout(al,1000)}}function q(a2,a1){var a0;if(window.XMLHttpRequest){a0=new XMLHttpRequest()}else{a0=new ActiveXObject("Microsoft.XMLHTTP")}a0.onreadystatechange=function(){if(4==a0.readyState&&200==a0.status){a1(a0.responseText)}};a0.open("GET",a2,true);a0.send()}function aB(a3,a1,a2){var a0;if(window.XMLHttpRequest){a0=new XMLHttpRequest()}else{a0=new ActiveXObject("Microsoft.XMLHTTP")}a0.onreadystatechange=function(){if(4==a0.readyState&&200==a0.status){a1.addSrc({src:a3,type:"application/x-mpegURL",label:a2.name,res:a2.width})}};a0.open("HEAD",a3);a0.send()}function y(a1,a4){var a2=a4.split("|"),a3,a0;if(a2.length<2){return}a3=a2[0];a0=a2[1];q(a3+"meta/"+a0,function(a9){var a6=JSON.parse(a9),a5,a8,a7;if(!a6){return}for(a5 in a6.outputs){var a8=a6.outputs[a5],a7=a3+"pa/"+a0+"/"+a0+a8.name+".m3u8";aB(a7,a1,a8)}})}function ay(a1,a0){try{var a4,a2,a6=a0.attr("progressally-video-js-identifier"),a5=a0.attr("progressally-aws-video");if(a6 in videojs.players){a4=videojs.players[a6]}else{a2={controls:true,preload:"auto",playbackRates:[0.5,1,1.5,2],plugins:{videoJsResolutionSwitcher:{dynamicLabel:true}}};a4=videojs(a6,a2);a4.ready(function(){var a7=this;aG(this.el_).find("video")[0].player={pause:function(){a7.pause()},play:function(){a7.play()}}});a4.on("error",function(a8){if(a4.error_&&a4.error_.code&&a4.error_.code===3){if(a5){var a9=a5.split("|"),ba=a9[0],a7=a9[1];a4.src({type:"video/mp4",src:ba+"source/"+a7})}}})}if(a0.attr("progressally-videojs-hide-seek")){a4.controlBar.progressControl.disable()}if(a5){y(a4,a5)}a4.on("timeupdate",function(a7){I(a7,a1)});a4.on("pause",function(a7){I(a7,a1)});a4.on("ended",function(a7){I(a7,a1)})}catch(a3){}}function I(a0,a1){if(a0.target.player.currentTime){var a2=a0.target.player.currentTime();aY("video-js>"+a1,a2)}}aG(document).on("contextmenu",".progressally-video-js-video video",function(a0){a0.preventDefault()});function t(a0){var a1=aG('<div style="position:absolute;top:10px;padding:5px;border-radius:5px;border:1px solid #000000;opacity:0;background-color:#ffffff;z-index:9999999;">Please start the video first.</div>');a0.css("position","relative");a0.append(a1);a1.animate({opacity:1},200);setTimeout(function(){a1.animate({opacity:0},1000,function(){a1.remove()})},1000)}function aM(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)}var e=0;aG(document).on("click touchend","[progressally-notes-update]",function(a2){var a1=aG(this),a0=a1.attr("progressally-notes-update");U(a0)});aG(document).on("click touchend","[progressally-notes-update-display]",function(a2){var a1=aG(this),a0=a1.attr("progressally-notes-update-display");U(a0)});aG(document).on("keydown","[progressally-notes-value]",function(a2){if(a2.keyCode==27){a2.preventDefault();var a1=aG(this),a0=a1.attr("progressally-notes-value");a(a0);a1.blur();return false}});aG(document).on("click touchend","[progressally-notes-input-save]",function(a1){var a0=aG(this).attr("progressally-notes-input-save");ad(a0)});aG(document).on("click touchend","[progressally-notes-input-cancel]",function(a1){var a0=aG(this).attr("progressally-notes-input-cancel");a(a0)});function U(a0){++e;aG('[progressally-notes-update-display-container="'+a0+'"]').hide();var a1=aG('[progressally-notes-value="'+a0+'"]'),a2=p(a1.val());a2=Math.min(20,Math.max(a2+1,8));a1.prop("rows",a2);aG('[progressally-notes-input-container="'+a0+'"]').show();aG('[progressally-notes-value="'+a0+'"]').focus().select()}function a(a0){aG('[progressally-notes-update-display-container="'+a0+'"]').show();aG('[progressally-notes-input-container="'+a0+'"]').hide();aG('[progressally-notes-value="'+a0+'"]').blur();--e}function C(a2){var a0=[],a1=0;for(;a1<a2.length;++a1){if(a2[a1].files.length>0){a0.push(a2[a1].files[0])}}return a0}function aw(a0){--e;aG('[progressally-notes-update-display-container="'+a0+'"]').show();aG('[progressally-notes-input-container="'+a0+'"]').hide();aG('[progressally-notes-wait="'+a0+'"]').hide();aG('[progressally-notes-value="'+a0+'"]').blur()}function ad(ba){var a5=aG('[progressally-notes-value="'+ba+'"]'),a2=a5.val(),a3=a5.attr("progressally-notes-value-param"),a7=a3.split("|");if(a7.length<7){return}var a4=a7[0],bf=a7[1],bb=a7[2],a1=a7[3],bd=a7[4],a9=a7[5],be=a7[6],bc=aG('[progress-note-attachment-file="'+ba+'"]'),a0=K(a1,bb),a6=C(bc);aG('[progressally-notes-wait="'+ba+'"]').show();if(a2.length<=0&&a6.length>0){a2=" "}var a8={action:"progressally_notes_update",val:a2,pid:a4,nid:bf,ord:bb,uid:bd,nonce:a9,allow_attachment:be,att:a0.join(","),to_update:ag()};aG.ajax({type:"POST",url:progressally_update.ajax_url,data:a8,success:function(bg){try{aQ(bg,a4,bf,bd,bb,a1,ba,a6)}catch(bh){alert(bh);aw(ba)}}});return false}function aX(a0,a7){if(!("code" in a0)){throw"Unable to update note display"}var a1=aG("#progressally-private-note-"+a7),a1,a4,a6,a2,a3,a5;a4=a1.attr("progressally-note-customize");a6=aG.parseJSON(a4);a3=a0.code;for(a2 in a6){a3=a3.replace(new RegExp("--"+a2+"--","g"),a6[a2])}a5=aG(a3);a5.attr("progressally-note-customize",a4);a1.after(a5);a1.remove()}function aQ(a4,a2,a7,a6,a5,a0,a1,a3){var a8=JSON.parse(a4);if("status" in a8){if(a8.status==="error"){throw a8.message}if("data" in a8){if(progressally_update.user==="0"){ab(a8.data["key"],a8.data["notes"])}}if("progress" in a8){B(a2,a8.progress)}if(a3.length>0){aK(a2,a7,a6,a5,a0,a1,0,a3)}else{aX(a8,a0)}}else{throw"Invalid response. Please refresh the page and try again."}}function p(a0){var a1=a0.match(/(\r\n|\n\r|\r|\n)/g);if(null===a1){return 1}return a1.length+1}function aF(a0){a0=a0.replace(/&/g,"&amp;");a0=a0.replace(/</g,"&lt;");a0=a0.replace(/>/g,"&gt;");a0=a0.replace(/\'/g,"&#39;");a0=a0.replace(/\"/g,"&quot;");a0=a0.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2");return a0}function aK(a3,a8,a7,a6,a1,a2,a5,a4){if(a5>=a4.length){aw(a2);return}var a0=a4[a5],a9="slice";if("mozSlice" in a0){a9="mozSlice"}else{if("webkitSlice" in a0){a9="webkitSlice"}}aZ(0,a0,a9,a3,a8,a7,a6,a1,-1,0,function(ba){if(a5===a4.length-1){aX(ba,a1)}else{aK(a3,a8,a7,a6,a1,a2,a5+1,a4)}})}var Q=102400;function aZ(a4,a2,bf,a3,be,bd,ba,a1,a6,bb,bc){var a0=a4*Q,a5=a0+Q,a9=a2.size;if(a5>a9){a5=a9}var a8=a2[bf](a0,a5),a7=new FormData();a7.append("action","progressally_notes_add_attachment");a7.append("nonce",progressally_update.progressally_update_nonce);a7.append("index",a4);a7.append("file_name",a2.name);a7.append("content",a8);a7.append("pid",a3);a7.append("nid",be);a7.append("uid",bd);a7.append("ord",ba);if(a6){a7.append("aid",a6)}aG.ajax({type:"POST",url:progressally_update.ajax_url,data:a7,cache:false,contentType:false,processData:false,success:function(bg){l(bg,a5,a4,a2,bf,a9,a3,be,bd,ba,a1,a6,bb,bc)}})}function l(a4,a5,a3,a1,bf,a9,a2,bd,bc,a8,a0,a6,ba,bb){try{var be=JSON.parse(a4);if("status" in be){if(be.status==="retry"){ba+=1;if(ba>3){throw"Upload failed 3 times"}aZ(a3,a1,bf,a2,bd,bc,a8,a0,a6,ba,bb);return}else{if(be.status!=="success"){throw be.message}}}else{throw"Unable to connect to server"}if(a5<a9){aZ(a3+1,a1,bf,a2,bd,bc,a8,a0,be.aid,0,bb)}else{bb(be)}}catch(a7){alert("Cannot upload file due to error:\n["+a7+"]\nPlease refresh the page and try again.");return}}aG(document).on("click touchend","[progressally-notes-attachment-add]",function(){var a0=aG(this).attr("progressally-notes-attachment-add");aG('[progressally-notes-attachment-container="'+a0+'"]').append('<input class="progress-note-attachment-file-input" type="file" progress-note-attachment-file="'+a0+'" />')});aG(document).on("click touchend",".progressally-notes-display-attachment-link",function(a0){a0.stopPropagation()});var ae=10485760;aG(document).on("change","[progress-note-attachment-file]",function(){if(this.files.length>0){var a0=this.files[0].name.toLowerCase();if(a0.substring(a0.length-4)===".php"){alert("PHP files cannot be uploaded");aG(this).val("")}if(this.files[0].size>ae){alert("The attachment file cannot exceed 10MB in size.");aG(this).val("")}}});aG(document).on("click touchend","[progressally-notes-attachment-delete]",function(){var a0=aG(this).attr("progressally-notes-attachment-delete");aG("#progressally-note-attachment-"+a0).remove()});function K(a6,a1){var a0=[],a3="progressally-notes-existing-attachment-"+a6+"-"+a1,a5=aG("["+a3+"]"),a4=0,a2;for(;a4<a5.length;++a4){a2=aG(a5[a4]);a0.push(a2.attr(a3))}return a0}function aL(){aO();if(aG("[progressally-youtube-init]").length>0){aI();setTimeout(ax,500)}if(aG("[progressally-vimeo-init]").length>0){aN();setTimeout(aT,500)}if(aG("[progressally-wistia-init]").length>0){ai();aA()}if(aG("[progressally-video-js-id]").length>0){al()}if(!aG.isFunction(aG.fn.on)){az(".progressally-quiz-reset-button",M);az(".progressally-quiz-submit-button",am);az('[progressally-video-target="local"]',aq);az('[progressally-video-target="vimeo"]',ar);az('[progressally-video-target="youtube"]',g);az('[progressally-video-target="wistia"]',m)}}if(aG.isFunction(aG.fn.on)){aG("html").on("touchend click",".progressally-quiz-reset-button",function(a0){return o(a0,this,M)});aG("html").on("touchend click",".progressally-quiz-submit-button",function(a0){return o(a0,this,am)});aG("html").on("touchend click",'[progressally-video-target="local"]',function(a0){return o(a0,this,aq)});aG("html").on("touchend click",'[progressally-video-target="vimeo"]',function(a0){return o(a0,this,ar)});aG("html").on("touchend click",'[progressally-video-target="youtube"]',function(a0){return o(a0,this,g)});aG("html").on("touchend click",'[progressally-video-target="wistia"]',function(a0){return o(a0,this,m)})}aL();function ao(a2){var a1=a2[0].getBoundingClientRect();if(a1.top<0){var a3=a2.offset(),a0=a3.top-20;aG("html, body").animate({scrollTop:a0})}}aG(document).on("click touchend",".progressally-quiz-next-button",function(a3){var a2=aG(this),a4=aG("#"+a2.attr("progressally-validate")),a1=aG("#"+a2.attr("progressally-nav-target")),a0=a2.attr("progressally-nav-value");if(!P(a4)){return false}a1.val(a0).change();ao(a2.parents(".progressally-quiz"))});aG(document).on("click touchend",".progressally-quiz-back-button",function(a2){var a1=aG(this),a0=aG("#"+a1.attr("progressally-nav-target")),a3=a1.attr("progressally-nav-value");a0.val(a3).change();ao(a1.parents(".progressally-quiz"))});if(document.addEventListener){document.addEventListener("ambitionallyrefresh",function(a0){aL()},false)}else{if(document.attachEvent){document.attachEvent("ambitionallyrefresh",function(a0){aL()})}}aG(document).on("click touchend","[progressally-complete-button]",function(a7){var a8=aG(this),a3=a8.attr("progressally-complete-button"),a9={},a5,a4,a2,a6,a1,a0;if(typeof a3===typeof undefined||a3===false){return}a5=a3.split("|");if(a5.length<2){return}a4=a5[0];a2=a5[1].split(",");for(a6=0;a6<a2.length;++a6){a1=aG('.progressally-update[key="'+a2[a6]+'"][post-id="'+a4+'"]');a0=a1.attr("disabled");if(typeof a0===typeof undefined||a0===false){a1.prop("checked",true)}}a9=J(a4);for(a6=0;a6<a2.length;++a6){a9[a2[a6]]=true}aE(a4,a9)});function X(a2,a1,a0){var a3={action:"progressally_do_interaction",p:a2,interaction_id:a1,to_update:a0,progressally_update_nonce:progressally_update.progressally_update_nonce};aG.ajax({type:"POST",url:progressally_update.ajax_url,data:a3,success:function(a5){try{var a4=JSON.parse(a5);B(a2,a4);T(a2,a4);aG('[progressally-interaction-wait="'+a2+"|"+a1+'"]').hide()}catch(a6){}}})}aG(document).on("click touchend","[progressally-interaction-trigger]",function(a6){var a7=aG(this),a8=a7.attr("progressally-interaction-warning"),a1=a7.attr("progressally-interaction-trigger"),a0=ag(),a4,a2,a3;if(typeof a8!==typeof undefined&&a8){var a5=confirm(a8);if(a5!==true){return}}if(typeof a1===typeof undefined||false===a1){return}aG('[progressally-interaction-wait="'+a1+'"]').show();a4=a1.split("|");if(a4.length<2){return}a2=a4[0];a3=a4[1];X(a2,a3,a0)});function ag(){var a0=aG("[progressally-interaction]").map(function(){return aG(this).attr("progressally-interaction")}).get();return a0}function V(a1){if(!a1.is(":visible")){return}var a2=a1.offset(),a0=a2.top-20;aG("html, body").animate({scrollTop:a0})}function aY(a6,a2){if(a6 in progressally_update.video){var a1,a4=[],a7=[],a3,a5,a0,a8;for(a5 in progressally_update.video[a6]){a1=progressally_update.video[a6][a5]["time"];if(a2>=a1){a4.push(progressally_update.video[a6][a5]["obj"]);a7.push(a5)}}if(a4.length<=0){return}a3=progressally_update.post_id;for(a5=0;a5<a4.length;++a5){a0=aG('.progressally-update[key="'+a4[a5]+'"][post-id="'+a3+'"]');a0.prop("checked",true);delete progressally_update.video[a6][a7[a5]]}a8=J(a3);for(a5=0;a5<a4.length;++a5){a8[a4[a5]]=true}aE(a3,a8)}}aG("[progressally-local-time]").each(function(a3,a5){var a1=aG(a5),a6=a1.attr("progressally-local-time");if(a6.length<=0){return}var a2=new Date(parseInt(a6)*1000),a4=a2.toString(),a7=a4.indexOf("GMT"),a0=-1;if(a7>=0){a0=a4.indexOf(" ",a7);if(a0>0){a4=a4.replace(a4.substring(a7,a0),"")}}a1.text(a4)});function af(a1){try{if(typeof window.Event==="function"){var a0=new CustomEvent("popupallyshowpopup",{detail:{popup_id:a1}});document.dispatchEvent(a0)}else{if(typeof document.createEvent==="function"){var a0=document.createEvent("CustomEvent");a0.initCustomEvent("popupallyshowpopup",true,true,{popup_id:a1});document.dispatchEvent(a0)}}}catch(a2){}}});